<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR Card</title>

  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/3.4.3/aframe/build/aframe-ar.js"></script>

  <style>
    #tap {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2em;
      z-index: 10;
      text-align: center;
    }
  </style>
</head>

<body style="margin:0; overflow:hidden;">

<div id="tap">Toca la pantalla para ver el mensaje ðŸ’™ðŸ’›</div>

<a-scene embedded arjs>

  <a-assets>
    <video id="vid"
           src="video.mp4"
           preload="auto"
           muted
           playsinline
           webkit-playsinline
           loop>
    </video>
  </a-assets>

  <a-marker id="marker" type="pattern" url="marker.patt">
    <a-video src="#vid"
             width="1"
             height="0.56"
             position="0 0.3 0"
             rotation="-90 0 0">
    </a-video>
  </a-marker>

  <a-entity camera></a-entity>
</a-scene>

<script>
  const overlay = document.getElementById('tap');
  const video = document.getElementById('vid');
  const marker = document.getElementById('marker');

  overlay.addEventListener('click', () => {
    video.play();          // ðŸ”“ desbloquea Safari
    overlay.style.display = 'none';
  });

  marker.addEventListener('markerFound', () => {
    video.play();
  });

  marker.addEventListener('markerLost', () => {
    video.pause();
  });
</script>

</body>
</html>
